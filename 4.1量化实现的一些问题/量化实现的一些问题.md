

# 量化实现的一些问题

## 对称量化和非对称量化在硬件中具体是如何操作的









## 直接将量化后线性运算得到的结果，输入激活函数的数学等效性问题

**量化一般是用于涉及线性操作的地方，比如transformer前馈层**

- **这里的运算一般是**： $X = activate(X_{pre}W)$  activate是激活函数

- **为了追求推理速度，一般是直接将量化后运算结果输入激活函数的，这样能保证数学等效性吗**

	$ activate(\dfrac{X_{pre}W}{s_x s_w})s_x s_w = activate(X_{pre} W) $​？ 
	
	

### 激活函数为ReLU（原始的transformer架构）

$\text{ReLU}(x) =  \begin{cases}  x & \text{if } x \geq 0, \\ 0 & \text{otherwise}. \end{cases}$

**ReLU函数具备正齐次性**： $\text{ReLU}(kx) = k*\text{Relu(x)}, k>=0$

**又因为量化步长scale是不小于0的：**$ \text{ReLU}(\dfrac{X_{pre}W}{s_x s_w})s_x s_w = \text{ReLU}(X_{pre} W) $





### **激活函数为GELU**



